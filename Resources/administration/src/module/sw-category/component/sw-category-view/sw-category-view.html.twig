{% block sw_category_view %}
    <sw-card-view class="sw-category-view">

        {% block sw_category_content_language_info %}
            <sw-language-info :entityDescription="placeholder(category, 'name', $tc('sw-manufacturer.detail.textHeadline'))"></sw-language-info>
        {% endblock %}

        {% block sw_category_view_information %}
            <sw-card :title="$tc('sw-category.general.headlineInformationCard')" :isLoading="isLoading">
                <sw-container columns="repeat(auto-fit, minmax(150px, 1fr))" gap="0px 30px" class="sw-category__infos">
                    {% block sw_category_view_information_name %}
                        <sw-field
                            name="categoryName"
                            class="sw-category__name"
                            v-model="category.name"
                            :label="$tc('sw-category.general.categoryNameLabel')"
                            :placeholder="placeholder(category, 'name')">
                        </sw-field>
                    {% endblock %}

                    {% block sw_category_view_information_active %}
                        <sw-field type="boolean" :label="$tc('sw-category.general.isCategoryActiveLabel')" name="categoryActive" v-model="category.active"></sw-field>
                    {% endblock %}
                </sw-container>

                {% block sw_category_view_information_description %}
                    <sw-text-editor
                        :label="$tc('sw-category.general.descriptionLabel')"
                        name="categoryDescription"
                        :placeholder="placeholder(category, 'cmsDescription')"
                        v-model="category.cmsDescription">
                    </sw-text-editor>
                {% endblock %}

                {% block sw_category_content_information_subcategories %}
                    <sw-field
                        name="categoryShowSubcategories"
                        type="boolean"
                        :label="$tc('sw-category.general.showSubcategoryProductsLabel')"
                        v-model="category.displayNestedProducts">
                    </sw-field>
                {% endblock %}

                {% block sw_category_view_information_media %}
                    <sw-media-upload
                        variant="regular"
                        :source="mediaItem"
                        :uploadTag="category.id"
                        :allowMultiSelect="false"
                        @sw-media-upload-new-uploads-added="onUploadAdded"
                        @sw-media-upload-media-upload-success="setMediaItem"
                        @sw-media-upload-open-sidebar="openMediaSidebar"
                        @sw-media-upload-remove-image="removeMediaItem">
                    </sw-media-upload>
                {% endblock %}
            </sw-card>
        {% endblock %}

        {% block sw_category_view_products %}
            <sw-card :title="$tc('sw-category.general.productAssignmentHeadline')" :isLoading="isLoading">

                {% block sw_category_view_products_search %}
                    <div class="sw-category-view__product-search">
                        <sw-category-select :hasPreview="false" :store="productStore" id="productSelection" placeholder="Produkte durchsuchen und zuweisen..." @input="onAddProduct"></sw-category-select>
                    </div>
                {% endblock %}

                {% block sw_category_view_products_grid %}
                    <sw-container slot="grid" type="row" v-if="products">
                        <sw-grid
                            :items="products"
                            :sortBy="sortBy"
                            :sortDirection="sortDirection"
                            :isLoading="productsLoaded"
                            table>

                            <template slot="columns" slot-scope="{ item }">
                                <sw-grid-column flex="minmax(200px, 1fr)" label="Name">
                                    {{ placeholder(item, 'name' ) }}
                                </sw-grid-column>
                                <sw-grid-column flex="minmax(200px, 1fr)" label="Hersteller">
                                    {{ placeholder(item.manufacturer, 'name' ) }}
                                </sw-grid-column>

                                <sw-grid-column flex="70px" align="center">
                                    <sw-context-button>
                                        <router-link class="sw-category-view__grid-link" target="_blank" :to="{ name:'sw.product.detail', params: { id: item.id }}">
                                            <sw-context-menu-item>
                                                Details
                                            </sw-context-menu-item>
                                        </router-link>
                                        <sw-context-menu-item @click="onRemoveProduct(item.id)">
                                            Remove
                                        </sw-context-menu-item>
                                    </sw-context-button>
                                </sw-grid-column>
                            </template>

                            <template slot="pagination">
                                <sw-pagination
                                    :page="page"
                                    :limit="limit"
                                    :total="total"
                                    :total-visible="7"
                                    @page-change="onPageChange">
                                </sw-pagination>
                            </template>

                        </sw-grid>
                    </sw-container>
                {% endblock %}
            </sw-card>
        {% endblock %}

        {% block sw_category_view_sidebar %}
            <template slot="card-view-sidebar">
                <sw-sidebar-media-item ref="mediaSidebarItem">
                    <template slot="context-menu-items" slot-scope="media">
                        <sw-context-menu-item @click="setMediaItem(media.mediaItem)">
                            {{ $tc('sw-category.general.useAsLogo') }}
                        </sw-context-menu-item>
                    </template>
                </sw-sidebar-media-item>
            </template>
        {% endblock %}

    </sw-card-view>
{% endblock %}
