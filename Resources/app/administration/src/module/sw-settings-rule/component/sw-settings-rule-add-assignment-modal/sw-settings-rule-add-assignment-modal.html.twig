{% block sw_settings_rule_add_assignment_modal %}
<sw-modal
    class="sw-settings-rule-add-assignment-modal"
    :title="entityContext.label"
:variant="modalSize"
    @modal-close="onCloseAddModal">

    {% block sw_settings_rule_add_assignment_modal_listing %}
        <sw-entity-listing
            v-if="entityContext.entityName !== 'category'"
            class="sw-settings-rule-detail-assignments__entity-listing"
            :columns="entityContext.addContext.gridColumns"
            :is-loading="isLoading"
            :items="entities"
            :repository="repository"
            :local-mode="false"
            :allow-delete="false"
            :allow-inline-edit="false"
            :show-settings="false"
            :criteria-limit="criteriaLimit"
            :show-selection="true"
            :allow-column-edit="false"
            :full-page="false"
            @selection-change="onSelect"
        >
            <template
                slot="column-active"
                slot-scope="{ item }"
            >
                {% block sw_settings_rule_add_assignment_modal_listing_active_flag %}
                <sw-icon
                    v-if="item.active"
                    name="small-default-checkmark-line-medium"
                    small
                    class="is--active"
                />
                <sw-icon
                    v-else
                    name="small-default-x-line-medium"
                    small
                    class="is--inactive"
                />
                {% endblock %}
            </template>
        </sw-entity-listing>
    {% endblock %}

    {% block sw_settings_rule_add_assignment_modal_category_tree %}
        <sw-settings-rule-category-tree v-else
                                :rule="this.rule"
                                :association="this.entityContext.addContext.association"
                                :categoriesCollection="this.entities"
                                placeholder="Add categories"
                                @on-selection="onSelect">
        </sw-settings-rule-category-tree>
    {% endblock %}

    {% block sw_settings_rule_add_assignment_modal_footer %}
        <template #modal-footer>

            {% block sw_settings_rule_add_assignment_modal_cancel %}
                <sw-button size="small"
                           @click="onCloseAddModal">
                    {{ $tc('global.default.cancel') }}
                </sw-button>
            {% endblock %}

            {% block sw_settings_rule_add_assignment_modal_confirm %}
                <sw-button size="small"
                           variant="primary"
                           @click="onAdd">
                    {{ $tc('global.default.add') }}
                </sw-button>
            {% endblock %}
        </template>
    {% endblock %}
</sw-modal>
{% endblock %}
