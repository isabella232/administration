{% block sw_settings_import_export_activity %}
    <div class="sw-settings-import-export-activity">
        {% block sw_settings_import_export_activity_listing %}
            <sw-entity-listing
                    :repository="logRepository"
                    :items="logs"
                    :isLoading="isLoading"
                    :columns="exportActivityColumns"
                    sortBy="createdAt"
                    sortDirection="DESC"
                    :showSettings="false"
                    :showSelection="false"
                    :allowColumnEdit="false"
                    :fullPage="true">
                {% block sw_settings_import_export_activity_listing_size %}
                    <template #column-file.size="{ item }">
                        {{ calculateFileSize(item.file.size) }}
                    </template>
                {% endblock %}
                {% block sw_settings_import_export_activity_listing_records %}
                    <template #column-records="{ item }">
                            {{ item.records }}
                    </template>
                 {% endblock %}
                <template #column-label-invalidRecords="{ column }">
                    {{ $te(column.label) ? $tc(column.label) : column.label }}
                    <sw-help-text class="sw-settings-import-export-activity__invalid-records-help-text"
                                  :text="$tc('sw-settings-import-export.activity.invalidHelpText')">
                    </sw-help-text>
                </template>
                {% block sw_settings_import_export_activity_listing_invalid_records %}
                    <template #column-invalidRecords="{ item }">
                        <template v-if="item.invalidRecordsLog">
                            {{ item.invalidRecordsLog.records }}
                        </template>
                        <template v-else>0</template>
                    </template>
                {% endblock %}
                {% block sw_settings_import_export_activity_listing_createdAt %}
                    <template #column-createdAt="{ item }">
                        {{ item.createdAt | date({hour: '2-digit', minute: '2-digit'})}}
                    </template>
                {% endblock %}

                {% block sw_settings_import_export_activity_listing_state %}
                    <template #column-state="{ item }">
                        <template v-if="item.state === 'failed'">
                            <sw-icon name="small-default-x-line-small"></sw-icon>
                        </template>
                        <template v-else-if="item.state === 'success'">
                            <sw-icon name="small-default-checkmark-line-small"></sw-icon>
                        </template>
                        <template v-else>
                            {{ item.state }}
                        </template>
                    </template>
                {% endblock %}

                {% block sw_settings_import_export_activity_listing_actions %}
                    <template #actions="{ item }">
                        <a class="sw-settings-import-export-activity__download-action "
                           :href="getDownloadUrl(item.fileId, item.file.accessToken)"
                           target="_blank">
                            <sw-context-menu-item >
                                {{ $tc('sw-settings-import-export.activity.contextMenu.downloadFile') }}
                            </sw-context-menu-item>
                        </a>
                        <sw-context-menu-item @click="onOpenProfile(item.profileId)">
                            {{ $tc('sw-settings-import-export.activity.contextMenu.showProfile') }}
                        </sw-context-menu-item>
                        <template v-if="item.invalidRecordsLog">
                            <a class="sw-settings-import-export-activity__download-action"
                               :href="getDownloadUrl(item.invalidRecordsLog.fileId, item.invalidRecordsLog.file.accessToken)"
                               target="_blank">
                                <sw-context-menu-item >
                                    {{ $tc('sw-settings-import-export.activity.contextMenu.downloadInvalidFile') }}
                                </sw-context-menu-item>
                            </a>
                        </template>
                    </template>
                {% endblock %}
            </sw-entity-listing>
        {% endblock %}

        {% block sw_settings_import_export_activity_modal %}
            <sw-settings-import-export-edit-profile-modal
                :profile="selectedProfile"
                @profile-save="saveSelectedProfile"
                @profile-close="closeSelectedProfile">
            </sw-settings-import-export-edit-profile-modal>
        {% endblock %}
    </div>
{% endblock %}
