<div class="sw-settings-import-export-exporter">
    <h3>
        <strong>{{  $tc('sw-settings-import-export.importer.selectProfileLabel')  }}</strong>
    </h3>

    <sw-entity-single-select
        :disabled="isLoading"
        :label="$tc('sw-settings-import-export.importer.profileLabel')"
        entity="import_export_profile"
        v-model="selectedProfileId"
        required>
    </sw-entity-single-select>

    {#
        TODO: Auslagern in andere Komponente. Genaue Beschreibung in "sw-settings-import-export-importer.html.twig"
     #}
    <div class="sw-settings-import-export-exporter__progress">
        <sw-button :disabled="disableExporting"
                   variant="primary"
                   @click="onStartExport">
            {{  $tc('sw-settings-import-export.exporter.startExportLabel')  }}
        </sw-button>

        <div class="sw-settings-import-export-exporter__progress-bar"
             v-if="totalProgress !== null">
            <div class="sw-settings-import-export-exporter__progress-bar-stats">
                <p>{{ statusText }}</p> {# TODO: Status #}
                <p>{{ progressIndex }} / {{ totalProgress }} Entries</p>
            </div>

            <sw-progress-bar :value="percentageExportProgress"
                             class="sw-settings-import-export-exporter__progress-bar-bar"
                             :class="progressBarClasses">
            </sw-progress-bar>
        </div>
    </div>

    <template v-if="!isLoading && stats">
        <div class="sw-settings-import-export-exporter__stats">
            {# Texte werden wahrscheinlich vom Server kommen #}
            <ul>
                <li class="sw-settings-import-export-exporter__stats-list-success">
                    <sw-icon name="default-basic-checkmark-line"
                             size="14px"
                             color="#758ca3">
                    </sw-icon>
                    {{ stats.success }} products successfully exported
                </li>
                <li class="sw-settings-import-export-exporter__stats-list-success">
                    <sw-icon name="default-basic-checkmark-line"
                             size="14px"
                             color="#758ca3">
                    </sw-icon>
                    File {{ stats.filename }} generated
                </li>
                <li class="sw-settings-import-export-exporter__stats-list-failure">
                    <sw-icon name="default-basic-x-line"
                             size="14px"
                             color="#de294c">
                    </sw-icon>
                    {{ stats.failure }} Errors occured
                </li>
            </ul>
        </div>

        <div>
            <sw-button variant="primary" :link="stats.fileUrl">{{  $tc('sw-settings-import-export.activity.contextMenu.downloadFile')  }}</sw-button>
            <sw-button :link="stats.logfileUrl">{{  $tc('sw-settings-import-export.exporter.showLogLabel')  }}</sw-button>
        </div>
    </template>

    {#
        TODO: Hier Ende vom Auslagern
     #}
    <sw-loader v-if="isLoading"></sw-loader>
</div>
