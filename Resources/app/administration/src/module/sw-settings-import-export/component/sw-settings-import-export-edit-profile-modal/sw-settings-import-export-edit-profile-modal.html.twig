<sw-modal v-if="profile"
          class="sw-settings-import-export-edit-profile-modal"
          @modal-close="$emit('profile-close')"
          :title="modalTitle">

    <sw-tabs defaultItem="general">

        <template slot-scope="{ active }" >
            <sw-tabs-item title="General"
                          name="general"
                          :activeTab="active">
                General
            </sw-tabs-item>

            <sw-tabs-item title="Field indicators"
                          name="fieldIndicators"
                          :activeTab="active">
                Field indicators
            </sw-tabs-item>
        </template>

        <template slot="content" slot-scope="{ active }">
            <template v-if="active === 'general'">

                <p>
                    Object types define a certain mode for importing and exporting data. This will additionally
                    lessen the mapping options below. Note that you cannot change the object type after
                    mapping options have been introduced.
                    <br>
                    <br>
                </p>

                <sw-field type="text"
                          label="Profile name"
                          required
                          v-model="profile.name">
                </sw-field>

                <sw-container columns="1fr 1fr" gap="16px">

                    {# TODO: change to entity single select #}
                    <sw-single-select label="Object type"
                                      required
                                      :options="[
                                          { value: 'product', label: 'Product' },
                                          { value: 'customer', label: 'Customer' },
                                          { value: 'categories', label: 'Categories' },
                                      ]"
                                      v-model="profile.sourceEntity">
                    </sw-single-select>

                    {# TODO: change to entity single select #}
                    <sw-single-select label="Identifier"
                                      required
                                      :disabled="!profile.sourceEntity"
                                      :options="[
                                          { value: 'product', label: 'product.id' },
                                          { value: 'manufacturer', label: 'manufacturer.id' },
                                      ]"
                                      v-model="profile.identifier">
                    </sw-single-select>
                </sw-container>

                <p>
                    Use the table below to map CSV fields to their respective database counterparts.
                </p>

                {#
                    TODO: Tabelle vll. in eine neue Komponente auslagern? Enth√§lt bisschen mehr Logik.
                     Als Prop wieder `profile` benutzen (oder direkt das Mapping)? Muss man vll. nachher mal schauen,
                     was am meisten Sinn macht.
                #}
                <sw-settings-import-export-edit-profile-modal-mapping :profile="profile">
                </sw-settings-import-export-edit-profile-modal-mapping>

            </template>

            <template v-if="active === 'fieldIndicators'">
                <p>
                    Separators and enclosure characters are used to indicate separate field within the CSV file. Separators are used to split single fields, enclosure characters are used to group multiple fields.
                    <br><br>
                </p>

                <sw-container columns="repeat(1fr, 1fr)">
                    {# TODO: change to entity single select #}
                    <sw-single-select
                        v-model="profile.delimiter"
                        label="Seperator character"
                        :options="[
                        { value: 'carets', label: 'Carets (^)' },
                        { value: 'commas', label: 'Commas (,)' },
                        { value: 'pipes', label: 'Pipes (|)' },
                        { value: 'semicolons', label: 'Commas (;)' },
                        { value: 'tabs', label: 'Tabs   ' },
                    ]"></sw-single-select>

                    {# TODO: change to entity single select #}
                    <sw-single-select
                        v-model="profile.enclosure"
                        label="Enclosure character"
                        :options="[
                        { value: 'doubleQuote', label: 'Double quote' },
                    ]"></sw-single-select>
                </sw-container>
            </template>
        </template>

    </sw-tabs>

    <template slot="modal-footer">
        <sw-button @click="$emit('profile-close')">Cancel</sw-button>
        <sw-button @click="$emit('profile-save')" variant="primary">{{ saveLabelSnippet }}</sw-button>
    </template>
</sw-modal>
