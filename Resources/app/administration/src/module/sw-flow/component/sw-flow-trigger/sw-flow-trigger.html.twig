{% block sw_flow_trigger %}
<div
    class="sw-flow-trigger"
    :class="swFlowTriggerClasses"
>
    {% block sw_flow_trigger_select_field %}
    <div class="sw-flow-trigger__select-toolbar">
        <div class="sw-flow-trigger__select-field-container">
            <sw-text-field
                v-model="searchTerm"
                required
                class="sw-flow-trigger__search-field"
                :disabled="disabled"
                :placeholder="$tc('sw-flow.detail.trigger.placeholder')"
                :error="flowEventNameError"
                @focus="onFocusTrigger"
            />
        </div>
    </div>
    {% endblock %}

    {% block sw_flow_trigger_tree_transition %}
    <transition name="sw-flow-trigger__fade-down">
        {% block sw_flow_trigger_tree_selection %}
        <div
            v-if="isExpanded"
            class="sw-flow-trigger__tree-selection"
        >

            {% block sw_flow_trigger_container %}
            <sw-container class="sw-flow-trigger__tree-container">

                {% block sw_flow_trigger_select_tree %}
                <sw-tree
                    v-if="showTreeView"
                    ref="flowTriggerTree"
                    :active-tree-item-id="eventName"
                    route-params-active-element-id="eventName"
                    :sortable="false"
                    :items="eventTree"
                    :searchable="false"
                    :disable-context-menu="true"
                    :on-change-route="changeTrigger"
                    bind-items-to-folder
                >

                    {% block sw_flow_trigger_tree_headline %}
                    <template #headline>
                        <span></span>
                    </template>
                    {% endblock %}

                    {% block sw_flow_trigger_tree_search %}
                    <template #search>
                        <span></span>
                    </template>
                    {% endblock %}

                    <template
                        #items="{
                            treeItems,
                            sortable,
                            disableContextMenu,
                            onChangeRoute,
                            newElementId,
                            checkItem
                        }"
                    >
                        <sw-tree-item
                            v-for="item in treeItems"
                            :key="item.id"
                            :sortable="sortable"
                            :item="item"
                            :on-change-route="onChangeRoute"
                            :display-checkbox="false"
                            @check-item="checkItem"
                        >

                            {% block sw_flow_trigger_tree_item_actions %}
                            <template #actions>
                                <span></span>
                            </template>
                            {% endblock %}
                        </sw-tree-item>
                    </template>
                </sw-tree>
                {% endblock %}

                {% block sw_flow_trigger_search_list %}
                <ul
                    v-else-if="searchResult.length > 0 && searchTerm.length > 0"
                    class="sw-flow-trigger__search-results"
                >
                    {% block sw_flow_trigger_search_list_item %}
                    <li
                        v-for="item in searchResult"
                        :key="item.id"
                        class="sw-flow-trigger__search-result"
                        @click="onClickSearchItem(item)"
                    >
                        {% block sw_flow_trigger_search_list_item_icon %}
                        <div class="sw-flow-trigger__search-result-icon">
                            <sw-icon
                                name="small-default-circle-small"
                                size="18"
                            />
                        </div>
                        {% endblock %}

                        {% block sw_flow_trigger_search_list_item_name %}
                        <span class="sw-flow-trigger__search-result-name">
                            {% block sw_flow_trigger_search_list_item_name_highlight %}
                            <sw-highlight-text
                                :search-term="searchTerm"
                                :text="getBreadcrumb(item)"
                            />
                            {% endblock %}
                        </span>
                        {% endblock %}
                    </li>
                    {% endblock %}
                </ul>
                {% endblock %}

                {% block sw_flow_trigger_search_empty %}
                <p
                    v-else
                    class="sw-flow-trigger__empty"
                >
                    {{ $tc('sw-flow.detail.trigger.textNoEvent') }}
                </p>
                {% endblock %}

            </sw-container>
        {% endblock %}
        </div>
        {% endblock %}
    </transition>
    {% endblock %}
</div>
{% endblock %}
